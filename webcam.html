<!DOCTYPE html>
<html lang="en">
  <head>
    <title>WEBC@M TEST</title>
  </head>
  <body>
    <video></video>
    <a><img src="" /></a>
    <canvas style="display:none;"></canvas>
    <script type="text/javascript" src="webcam.js"></script>
    <script type="text/javascript">
      var conf = {
        'video': document.querySelector('video'),
        'callback': function(video, canvas, stream) {
          video.addEventListener('click', function(e) {
            var width = this.videoWidth;
            var height = this.videoHeight;
            var img = document.querySelector('img');
            var link = document.querySelector('a');

            canvas.setAttribute('width', width);
            canvas.setAttribute('height', height);
            canvas.getContext('2d').drawImage(video, 0, 0);

            img.setAttribute('src', canvas.toDataURL('image/png'));
            link.setAttribute('href', canvas.toDataURL('image/png'));
            link.setAttribute('download', 'webcam.png');
          });

          video.play();
        },
        'failure': function(e) {
          console.log("Browser not supported");
        }
      }
      webcam(conf);
    </script>
  </body>
</html>
